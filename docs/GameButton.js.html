<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: GameButton.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: GameButton.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {GameElement} from "./GameElement.js";
import {Point} from "./Misc.js";
import {GameShape} from "./drawables/GameShape.js";
import {GameText} from "./drawables/GameText.js";
import {GameDrawable} from "./drawables/GameDrawable.js";

/**
 * GameButton class. Handles drawing and clicking for the button.
 * @extends GameElement
 *
 * @property {number} width Width of the button todo maxwidth of text inside
 * @property {number} height Height of the button
 * @property {string} color CSS color string. Color of the button
 * @property {string} text Text displayed on the button
 * @property {boolean} selected Is true while holding the button todo remove or make it do something
 * @property {Array&lt;callbackValue>} onPress Array of callbacks and their passed attributes to be triggered on button press
 * @property {GameDrawable} highlight Rectangle that highlights the button while pressed
 */
class GameButton extends GameElement {
    /**
     * Constructor for GameButton
     * @param {Point} center Center point of the element
     * @param {Object} attrs Attribute object
     */
    constructor(center,attrs={}) {
        super(center,[],attrs)
        this.selected = false
        this.onPress = []

        this.width = (attrs.width === undefined) ? 100 : attrs.width
        this.height = (attrs.height === undefined) ? 50 : attrs.height
        this.color = (attrs.color === undefined) ? 'lightgrey' : attrs.color;
        this.text = attrs.text;

        const rectangle = new GameShape('rectangle',{
                width:this.width,
                height:this.height,
                fill:this.color,
                level:-1,
                stroke: 'black',
                lineWidth: 5
            }
        )
        this.addChild(rectangle)

        const text = new GameText(this.text,{level:0,})
        this.addChild(text)

        this.highlight =  new GameShape('rectangle',{
                width:this.width+4,
                height:this.height+4,
                level:-1,
                stroke: 'lightblue',
                lineWidth: 5,
                visible:false
            }
        )
        this.addChild(this.highlight)

        this.clickable = true
        this.draggable = true
        this.stationary = true

        this.addOnClickListener(GameButton.#selectButton,this)
        this.addOnFinishDraggingListener(GameButton.#deselectButton,this)
    }

    /**
     * Adds a listener to be called on button press
     * @param {function} callback Function to be called
     * @param {Object} attrs Attribute object that will get passed to the function
     */
    addOnButtonPressListener(callback,attrs) {
        this.onPress.push([callback,attrs])
    }

    /**
     * Highlights the button on click
     * @param {GameButton} self Instance of the button passed on construction
     * @static
     * @private
     */
    static #selectButton(self) {
        self.highlight.visible = true
        self.selected = true
    }

    /**
     * Undos highlight of the button and calls the onPress listeners if mouse is inside
     * @param {GameButton} self Instance of the button passed on construction
     * @returns {Promise&lt;void>}
     * @static
     * @private
     */
    static async #deselectButton(self) {
        const mouse = self.shared.mousePos

        self.highlight.visible = false

        if (await self.isInside(mouse)) {
            for (const onPressElement of self.onPress) {
                onPressElement[0](onPressElement[1])
            }
        }
    }
}

export {GameButton}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Game.html">Game</a></li><li><a href="GameButton.html">GameButton</a></li><li><a href="GameCanvas.html">GameCanvas</a></li><li><a href="GameDrawable.html">GameDrawable</a></li><li><a href="GameElement.html">GameElement</a></li><li><a href="GameGif.html">GameGif</a></li><li><a href="GameHitbox.html">GameHitbox</a></li><li><a href="GameImage.html">GameImage</a></li><li><a href="GameShape.html">GameShape</a></li><li><a href="GameText.html">GameText</a></li><li><a href="GameTextInput.html">GameTextInput</a></li><li><a href="Point.html">Point</a></li></ul><h3>Global</h3><ul><li><a href="global.html#loadImage">loadImage</a></li><li><a href="global.html#randomColor">randomColor</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sun Mar 06 2022 21:02:36 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
